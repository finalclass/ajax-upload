{"version":3,"sources":["index.js"],"names":["ajaxUpload","_ref","_ref$files","files","undefined","_ref$url","url","_ref$data","data","_ref$method","method","_ref$onError","onError","_ref$onProgress","onProgress","_ref$onSuccess","onSuccess","_ref$filesFieldName","filesFieldName","_ref$arrayKey","arrayKey","xhr","XMLHttpRequest","formData","FormData","i","length","file","append","name","Object","keys","forEach","key","open","upload","onprogress","onload","status","responseBody","JSON","parse","responseText","Error","send"],"mappings":"AAAA,YAAA,SAASA,YAAUC,GAejB,IAAK,GAZDC,GAAaD,EAFjBE,MAAAA,EAAKC,SAAAF,KAAKA,EAING,EAAWJ,EAHfK,IAAAA,EAAGF,SAAAC,EAAG,GAAEA,EAKJE,EAAYN,EAJhBO,KAAAA,EAAIJ,SAAAG,KAAKA,EAMLE,EAAcR,EALlBS,OAAAA,EAAMN,SAAAK,EAAG,OAAMA,EAOXE,EAAeV,EANnBW,QAAAA,EAAOR,SAAAO,EAAG,WAQR,MARYP,SAASO,EAUnBE,EAAkBZ,EATtBa,WAAAA,EAAUV,SAAAS,EAAG,WAWX,MAXeT,SAASS,EAatBE,EAAiBd,EAZrBe,UAAAA,EAASZ,SAAAW,EAAG,WAcV,MAdcX,SAASW,EAgBrBE,EAAsBhB,EAf1BiB,eAAAA,EAAcd,SAAAa,EAAG,QAAOA,EAiBpBE,EAAgBlB,EAhBpBmB,SAAAA,EAAQhB,SAAAe,EAAG,KAAIA,EAGXE,EAAM,GAAIC,gBACVC,EAAW,GAAIC,UAEVC,EAAI,EAAGA,EAAItB,EAAMuB,OAAQD,GAAK,EAAG,CACxC,GAAIE,GAAOxB,EAAMsB,EACjBF,GAASK,OAAM,GAAIV,EAAiBE,EAAYO,EAAMA,EAAKE,MAG7DC,OAAOC,KAAKvB,OAAYwB,QAAQ,SAAUC,GACxCV,EAASK,OAAOK,EAAKzB,EAAKyB,MAG5BZ,EAAIa,KAAKxB,EAAQJ,GAAK,GAClBe,EAAIc,SACNd,EAAIc,OAAOC,WAAatB,GAG1BO,EAAIgB,OAAS,WACPhB,EAAIiB,QAAU,KAAOjB,EAAIiB,OAAS,IACpCtB,EAAUK,EAAIkB,cAAgBC,KAAKC,MAAMpB,EAAIqB,cAAerB,GAE5DT,EAAQ,GAAI+B,OAAMtB,EAAIkB,gBAI1BlB,EAAIuB,KAAKrB","file":"index.min.js","sourcesContent":["function ajaxUpload({\n  files = [],\n  url = '',\n  data = {},\n  method = 'POST',\n  onError = ()=>undefined,\n  onProgress = ()=>undefined,\n  onSuccess = ()=>undefined,\n  filesFieldName = 'files',\n  arrayKey = '[]'\n  }) {\n\n  var xhr = new XMLHttpRequest();\n  var formData = new FormData();\n\n  for (let i = 0; i < files.length; i += 1) {\n    let file = files[i];\n    formData.append(`${filesFieldName}${arrayKey}`, file, file.name);\n  }\n\n  Object.keys(data || {}).forEach(function (key) {\n    formData.append(key, data[key])\n  });\n\n  xhr.open(method, url, true);\n  if (xhr.upload) {\n    xhr.upload.onprogress = onProgress;\n  }\n\n  xhr.onload = function () {\n    if (xhr.status >= 200 && xhr.status < 400) {\n      onSuccess(xhr.responseBody || JSON.parse(xhr.responseText), xhr);\n    } else {\n      onError(new Error(xhr.responseBody));\n    }\n  };\n\n  xhr.send(formData);\n}\n"],"sourceRoot":"/source/"}